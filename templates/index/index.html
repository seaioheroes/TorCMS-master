{% extends "../theme/bage.html" %}
{% block head %}
<link rel="stylesheet" href="{{ static_url('f2elib/leaflet_1.0.3/leaflet.css') }}">
<script src="{{ static_url('f2elib/leaflet_1.0.3/leaflet.js') }}"></script>
<SCRIPT>
    // Generated by CoffeeScript 1.9.1

    $(document).ready(function () {
        var popup = L.popup();

        function onMapClick(e) {
            popup
                    .setLatLng(e.latlng)
                    .setContent("坐标位置" + e.latlng.toString())
                    .openOn(map);
        }


        var cities = new L.LayerGroup();
        var china_bnd = L.tileLayer.wms("http://wcs.osgeo.cn:8764/service?", {
            layers: 'wetland_background_region',
            format: 'image/png',
            transparent: true,
        });

        var nexrad = L.tileLayer.wms("http://wcs.osgeo.cn:8764/service?", {
            layers: 'wetland2000',
            format: 'image/png',
            transparent: true,
            attribution: "中国沼泽湿地2010年分布"
        });


        var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        });

        osm.addTo(cities);
        china_bnd.addTo(cities);
        nexrad.addTo(cities);


        var map = L.map('map', {
            center: [38, 105],
            zoom: 3,
            maxZoom: 11,
            minZoom: 3,
            layers: [cities],
        });


        map.on('click', onMapClick);


        var baseMaps = {
            "osm": osm,
        };


        var overlayMaps = {
            "省界": china_bnd,
            "中国湿地": nexrad
        };

        L.control.layers(baseMaps, overlayMaps).addTo(map);


    })

</script>
<style>
    <!--
    li {
        list-style: none
    }

    #demo {
        overflow: hidden;
        width: 100%;
    }

    #demo img {
        border: 3px solid #ddd;
        margin: 5px 2px
    }

    #indemo {
        float: left;
        width: 800%;
    }

    #demo1 {
        float: left;
    }

    #demo2 {
        float: left;
    }

    -->

</style>
{% end %}

{% block typebody %}
<div class="row">
    <div id="map"></div>
</div>
<div class="col-sm-12">

    <br>

    <div class="col-sm-4">
        <div class="panel panel-primary">
            {% module app_catalog_of('8100') %}
        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8300') %}

        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8500') %}
        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8700') %}
        </div>
    </div>
    <div class="col-sm-4">
        <div class="panel panel-primary">
            {% module app_catalog_of('8200') %}
        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8400') %}

        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8800') %}
        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8900') %}
        </div>
        <div class="panel panel-primary">
            {% module app_catalog_of('8600') %}
        </div>
    </div>
    <div class="col-sm-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-list-alt"></span>
                News
            </div>
            <ul class="list-group">
                {% module post_recent(3, with_catalog = False) %}
                {% module post_cat_recent('0100', label = 'China', num=10, with_catalog = False) %}
            </ul>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-list-alt"></span>
                Online maps and tools
            </div>
            <ul class="list-group">
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/map/m0001">中国自然保护区_在线地图</a>
                </li>
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/map/m0081">国家级自然保护区分布图_在线地图</a>
                </li>
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/map/m01fd">中国自然保护区的数量与结构地图</a>
                </li>
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/app/s3202">1比2.5万新旧地形图分幅编号在线转换</a>
                </li>
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/app/s3206">1比5万新旧地形图分幅编号在线转换</a>
                </li>
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/app/s3202">1比25万新旧地形图分幅编号在线转换</a>
                </li>
                <li class="list-group-item">
                    <a href="http://www.osgeo.cn/app/s3200">1比50万新旧地形图分幅编号在线转换</a>
                </li>
            </ul>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <a href="/page/cmi.html" class="move">
                    Survey project of wetland resources in China
                </a>
            </div>
            <div class="panel-body">
                Chinese marsh wetland resources investigation will be on the basis of the existing work, marsh
                wetland classification and further establish a scientific survey specification, break administrative
                division limit, from hydrothermal differentiation and natural geographical units as partition principle,
                focusing on the investigation of water peat and germplasm resources, will make up for the weak link in
                the past project
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <a href="/page/sub.html" class="move"> Subject Data Bases</a>
            </div>
            <div class="panel-body">
                Chinese marsh wetland resources investigation will be on the basis of the existing work, marsh
                wetland classification and further establish a scientificChinese marsh wetland resources investigation
                will be on the basis of the existing work
            </div>
        </div>
    </div>
    <div class="col-sm-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <a href="post/recent">Picture</a>
            </div>
            <div class="panel-body">
                <div id="demo">
                    <div id="indemo">
                        <div id="demo1">
                            {% for x in view %}
                            {% if len(x.logo) >= 46 %}
                            <a href="/post/{{ x.uid }}" title="{{ x.title }}">
                                <img src="{{ x.logo }}" width="162" height="120"
                                     alt="{{ x.title }}" style="border: 1px solid #ddd">
                            </a>
                            {% end %}
                            {% end %}
                        </div>
                        <div id="demo2"></div>
                    </div>
                </div>
                <script>
                    var speed = 50;
                    var tab = document.getElementById("demo");
                    var tab1 = document.getElementById("demo1");
                    var tab2 = document.getElementById("demo2");
                    tab2.innerHTML = tab1.innerHTML;
                    function Marquee() {
                        if (tab2.offsetWidth - tab.scrollLeft <= 0)
                            tab.scrollLeft -= tab1.offsetWidth
                        else {
                            tab.scrollLeft++;
                        }
                    }
                    var MyMar = setInterval(Marquee, speed);
                    tab.onmouseover = function () {
                        clearInterval(MyMar)
                    };
                    tab.onmouseout = function () {
                        MyMar = setInterval(Marquee, speed)
                    };

                </script>
            </div>
        </div>
    </div>
</div>
{% end %}
